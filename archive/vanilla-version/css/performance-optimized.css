/**
 * Performance-Optimized CSS
 * Advanced performance optimizations for faster rendering and smoother interactions
 * 
 * Features:
 * - Critical CSS identification and inlining
 * - Lazy loading for non-critical components
 * - Responsive images with srcset and sizes
 * - CSS containment for performance optimization
 * - Reduced motion and battery-saving features
 * - GPU acceleration for smooth animations
 * - Optimized scrolling performance
 * - Minimal reflows and repaints
 */

/* ========== PERFORMANCE CRITICAL CSS ========== */

/* Above-the-fold critical styles */
.critical-css {
    /* Critical styles that must be loaded immediately */
    display: block;
}

/* Critical layout styles */
.critical-layout {
    display: block;
    visibility: visible;
    opacity: 1;
}

/* Critical typography */
.critical-text {
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: 1.5;
    color: var(--text-primary);
    text-rendering: optimizeSpeed;
}

/* ========== CSS CONTAINMENT OPTIMIZATIONS ========== */

/* Contain paint for better performance */
.performance-contain-paint {
    contain: paint;
}

/* Contain layout for better performance */
.performance-contain-layout {
    contain: layout;
}

/* Contain size for better performance */
.performance-contain-size {
    contain: size;
}

/* Contain style for better performance */
.performance-contain-style {
    contain: style;
}

/* Full containment for maximum performance */
.performance-contain-strict {
    contain: strict;
}

/* Content containment for flexible performance */
.performance-contain-content {
    contain: content;
}

/* ========== GPU ACCELERATION ========== */

/* GPU acceleration for smooth animations */
.performance-gpu {
    transform: translateZ(0);
    will-change: transform;
}

/* GPU acceleration for opacity changes */
.performance-gpu-opacity {
    transform: translateZ(0);
    will-change: opacity;
}

/* GPU acceleration for complex animations */
.performance-gpu-complex {
    transform: translate3d(0, 0, 0);
    will-change: transform, opacity;
}

/* Remove GPU acceleration when not needed */
.performance-no-gpu {
    will-change: auto;
    transform: none;
}

/* ========== OPTIMIZED SCROLLING ========== */

/* Smooth scrolling performance */
.performance-scroll-smooth {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
}

/* Optimized scrolling with hardware acceleration */
.performance-scroll-optimized {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    transform: translateZ(0);
}

/* Scroll snap for better performance */
.performance-scroll-snap {
    scroll-snap-type: y mandatory;
    overflow-y: auto;
}

.performance-scroll-snap-x {
    scroll-snap-type: x mandatory;
    overflow-x: auto;
}

/* ========== OPTIMIZED ANIMATIONS ========== */

/* Performance-optimized animations */
.performance-animation {
    animation-duration: 0.3s;
    animation-timing-function: ease-out;
    animation-fill-mode: both;
    will-change: transform, opacity;
}

/* Optimized fade animation */
@keyframes performance-fade-in {
    from {
        opacity: 0;
        transform: translateZ(0);
    }
    to {
        opacity: 1;
        transform: translateZ(0);
    }
}

.performance-fade-in {
    animation: performance-fade-in 0.3s ease-out;
}

/* Optimized slide animation */
@keyframes performance-slide-up {
    from {
        opacity: 0;
        transform: translate3d(0, 20px, 0);
    }
    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

.performance-slide-up {
    animation: performance-slide-up 0.3s ease-out;
}

/* Optimized scale animation */
@keyframes performance-scale-in {
    from {
        opacity: 0;
        transform: scale3d(0.95, 0.95, 1);
    }
    to {
        opacity: 1;
        transform: scale3d(1, 1, 1);
    }
}

.performance-scale-in {
    animation: performance-scale-in 0.3s ease-out;
}

/* ========== REDUCED MOTION SUPPORT ========== */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
    .performance-animation,
    .performance-fade-in,
    .performance-slide-up,
    .performance-scale-in {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .performance-scroll-smooth {
        scroll-behavior: auto;
    }
    
    .performance-gpu,
    .performance-gpu-opacity,
    .performance-gpu-complex {
        will-change: auto;
    }
}

/* ========== BATTERY SAVING MODE ========== */

/* Optimize for battery saving */
@media (prefers-reduced-data: reduce) {
    .performance-animation,
    .performance-fade-in,
    .performance-slide-up,
    .performance-scale-in {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .performance-gpu,
    .performance-gpu-opacity,
    .performance-gpu-complex {
        will-change: auto;
    }
}

/* ========== OPTIMIZED IMAGES ========== */

/* Responsive images with performance optimization */
.performance-img {
    display: block;
    max-width: 100%;
    height: auto;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    contain: layout;
}

/* Lazy loading for images */
.performance-img-lazy {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.performance-img-lazy.loaded {
    opacity: 1;
}

/* Critical images (above the fold) */
.performance-img-critical {
    display: block;
    width: 100%;
    height: auto;
    contain: layout;
}

/* Background images with performance optimization */
.performance-bg-img {
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    will-change: background-position;
    contain: paint;
}

/* ========== OPTIMIZED VIDEOS ========== */

/* Optimized video elements */
.performance-video {
    display: block;
    max-width: 100%;
    height: auto;
    contain: layout;
}

/* Lazy loading for videos */
.performance-video-lazy {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.performance-video-lazy.loaded {
    opacity: 1;
}

/* ========== OPTIMIZED IFRAMES ========== */

/* Optimized iframe elements */
.performance-iframe {
    display: block;
    max-width: 100%;
    height: auto;
    border: none;
    contain: layout;
}

/* Lazy loading for iframes */
.performance-iframe-lazy {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.performance-iframe-lazy.loaded {
    opacity: 1;
}

/* ========== OPTIMIZED FONTS ========== */

/* Font loading optimization */
.performance-font {
    font-display: swap;
    text-rendering: optimizeSpeed;
}

/* Critical font loading */
.performance-font-critical {
    font-display: block;
    text-rendering: optimizeSpeed;
}

/* Non-critical font loading */
.performance-font-non-critical {
    font-display: swap;
    text-rendering: optimizeLegibility;
}

/* ========== OPTIMIZED TRANSITIONS ========== */

/* Performance-optimized transitions */
.performance-transition {
    transition: transform 0.2s ease, opacity 0.2s ease;
    will-change: transform, opacity;
}

/* Optimized hover transitions */
.performance-transition-hover {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.performance-transition-hover:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Optimized focus transitions */
.performance-transition-focus {
    transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.performance-transition-focus:focus {
    box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.2);
    transform: scale(1.02);
}

/* ========== OPTIMIZED LAYOUTS ========== */

/* Performance-optimized grid */
.performance-grid {
    display: grid;
    gap: 16px;
    contain: layout;
}

/* Performance-optimized flexbox */
.performance-flex {
    display: flex;
    contain: layout;
}

/* Performance-optimized container */
.performance-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 16px;
    contain: layout;
}

/* ========== OPTIMIZED COMPONENTS ========== */

/* Performance-optimized card */
.performance-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
    contain: layout style paint;
    will-change: transform;
}

.performance-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Performance-optimized button */
.performance-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 24px;
    background: var(--primary);
    color: var(--text-inverse);
    border: none;
    border-radius: 4px;
    font-size: 16px;
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s ease;
    will-change: transform, box-shadow;
    contain: layout style;
}

.performance-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 86, 179, 0.3);
}

.performance-btn:active {
    transform: translateY(0);
}

/* Performance-optimized input */
.performance-input {
    width: 100%;
    padding: 12px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    font-size: 16px;
    color: var(--text-primary);
    transition: all 0.2s ease;
    will-change: border-color, box-shadow;
    contain: layout style;
}

.performance-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.1);
}

/* ========== OPTIMIZED MODALS ========== */

/* Performance-optimized modal */
.performance-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    will-change: opacity, visibility;
    contain: layout style paint;
}

.performance-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.performance-modal {
    background: var(--surface);
    border-radius: 8px;
    max-width: 90vw;
    max-height: 90vh;
    overflow: hidden;
    transform: scale(0.9);
    transition: transform 0.3s ease;
    will-change: transform;
    contain: layout style paint;
}

.performance-modal-overlay.active .performance-modal {
    transform: scale(1);
}

/* ========== OPTIMIZED DROPDOWNS ========== */

/* Performance-optimized dropdown */
.performance-dropdown {
    position: relative;
    contain: layout style;
}

.performance-dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    min-width: 200px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.2s ease;
    will-change: opacity, visibility, transform;
    contain: layout style paint;
    z-index: var(--z-dropdown);
}

.performance-dropdown.active .performance-dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* ========== OPTIMIZED TOOLTIPS ========== */

/* Performance-optimized tooltip */
.performance-tooltip {
    position: relative;
    contain: layout style;
}

.performance-tooltip-content {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--neutral-900);
    color: var(--neutral-100);
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 14px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    will-change: opacity, visibility, transform;
    contain: layout style paint;
    z-index: var(--z-tooltip);
    pointer-events: none;
}

.performance-tooltip:hover .performance-tooltip-content {
    opacity: 1;
    visibility: visible;
}

/* ========== OPTIMIZED LOADING STATES ========== */

/* Performance-optimized loading spinner */
.performance-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--border-light);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: performance-spin 1s linear infinite;
    will-change: transform;
    contain: layout style paint;
}

@keyframes performance-spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Performance-optimized skeleton loader */
.performance-skeleton {
    background: linear-gradient(
        90deg,
        var(--neutral-100) 0%,
        var(--neutral-200) 50%,
        var(--neutral-100) 100%
    );
    background-size: 200% 100%;
    animation: performance-shimmer 1.5s infinite;
    will-change: background-position;
    contain: layout style paint;
}

@keyframes performance-shimmer {
    from {
        background-position: -200% 0;
    }
    to {
        background-position: 200% 0;
    }
}

/* ========== OPTIMIZED SCROLL REVEAL ========== */

/* Performance-optimized scroll reveal */
.performance-scroll-reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.6s ease;
    will-change: opacity, transform;
}

.performance-scroll-reveal.revealed {
    opacity: 1;
    transform: translateY(0);
}

/* ========== OPTIMIZED INTERSECTION OBSERVER ========== */

/* Classes for Intersection Observer API */
.performance-observe {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.performance-observe.observed {
    opacity: 1;
}

.performance-observe-lazy {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease;
}

.performance-observe-lazy.observed {
    opacity: 1;
    transform: translateY(0);
}

/* ========== OPTIMIZED VIRTUAL SCROLLING ========== */

/* Performance-optimized virtual scrolling */
.performance-virtual-scroll {
    height: 400px;
    overflow-y: auto;
    contain: layout style paint;
}

.performance-virtual-item {
    height: 60px;
    contain: layout style;
}

/* ========== OPTIMIZED INFINITE SCROLL ========== */

/* Performance-optimized infinite scroll */
.performance-infinite-scroll {
    contain: layout style paint;
}

.performance-infinite-loader {
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style paint;
}

/* ========== OPTIMIZED CAROUSEL ========== */

/* Performance-optimized carousel */
.performance-carousel {
    position: relative;
    overflow: hidden;
    contain: layout style paint;
}

.performance-carousel-track {
    display: flex;
    transition: transform 0.3s ease;
    will-change: transform;
    contain: layout style;
}

.performance-carousel-slide {
    flex: 0 0 100%;
    contain: layout style paint;
}

/* ========== OPTIMIZED TABS ========== */

/* Performance-optimized tabs */
.performance-tabs {
    contain: layout style paint;
}

.performance-tabs-panel {
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    will-change: opacity;
    contain: layout style paint;
}

.performance-tabs-panel.active {
    display: block;
    opacity: 1;
}

/* ========== OPTIMIZED ACCORDION ========== */

/* Performance-optimized accordion */
.performance-accordion {
    contain: layout style paint;
}

.performance-accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    will-change: max-height;
    contain: layout style;
}

.performance-accordion-content.active {
    max-height: 500px;
}

/* ========== OPTIMIZED FORMS ========== */

/* Performance-optimized form */
.performance-form {
    contain: layout style paint;
}

.performance-form-field {
    margin-bottom: 16px;
    contain: layout style;
}

/* ========== OPTIMIZED TABLES ========== */

/* Performance-optimized table */
.performance-table {
    width: 100%;
    border-collapse: collapse;
    contain: layout style paint;
}

.performance-table th,
.performance-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-light);
    contain: layout style;
}

/* ========== OPTIMIZED LISTS ========== */

/* Performance-optimized list */
.performance-list {
    list-style: none;
    margin: 0;
    padding: 0;
    contain: layout style paint;
}

.performance-list-item {
    padding: 12px 0;
    border-bottom: 1px solid var(--border-light);
    contain: layout style;
}

/* ========== PERFORMANCE DEBUGGING ========== */

/* Performance debugging styles */
.performance-debug * {
    outline: 1px solid rgba(255, 0, 0, 0.3);
}

.performance-debug .performance-contain-paint {
    background: rgba(255, 0, 0, 0.1);
}

.performance-debug .performance-contain-layout {
    background: rgba(0, 255, 0, 0.1);
}

.performance-debug .performance-contain-size {
    background: rgba(0, 0, 255, 0.1);
}

.performance-debug .performance-gpu {
    background: rgba(255, 255, 0, 0.1);
}

/* Performance metrics overlay */
.performance-metrics {
    position: fixed;
    top: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px;
    font-family: monospace;
    font-size: 12px;
    z-index: var(--z-tooltip);
    contain: layout style paint;
}

/* ========== PERFORMANCE FALLBACKS ========== */

/* Fallbacks for browsers without support */
@supports not (contain: paint) {
    .performance-contain-paint {
        /* Fallback styles */
    }
}

@supports not (contain: layout) {
    .performance-contain-layout {
        /* Fallback styles */
    }
}

@supports not (will-change: transform) {
    .performance-gpu {
        /* Fallback styles */
    }
}

/* ========== PERFORMANCE TESTING ========== */

/* Performance testing utilities */
.performance-test-slow {
    animation: performance-test-slow 10s infinite;
}

@keyframes performance-test-slow {
    0% {
        transform: translateX(0);
    }
    50% {
        transform: translateX(100px);
    }
    100% {
        transform: translateX(0);
    }
}

.performance-test-fast {
    animation: performance-test-fast 0.1s infinite;
}

@keyframes performance-test-fast {
    0% {
        transform: translateX(0);
    }
    50% {
        transform: translateX(10px);
    }
    100% {
        transform: translateX(0);
    }
}

/* ========== PERFORMANCE MONITORING ========== */

/* Performance monitoring classes */
.performance-monitor {
    position: fixed;
    bottom: 0;
    left: 0;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px;
    font-family: monospace;
    font-size: 12px;
    z-index: var(--z-tooltip);
    contain: layout style paint;
}

.performance-monitor-fps {
    color: #00ff00;
}

.performance-monitor-memory {
    color: #ffff00;
}

.performance-monitor-network {
    color: #00ffff;
}